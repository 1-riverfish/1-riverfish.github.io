<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="1-riverfish"><title>Moon框架入门教程2 · Ginger's blog</title><meta name="description" content="Moon框架入门教程2Instance实例The root Moon instance is the core of your application, this is where any top level data should be defined, and it should be moun"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">Share&amp;Joy</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">Ginger' Blog</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li><li class="soc"><a href="https://github.com/1-riverfish" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="http://yoursite.com/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2018&nbsp;<a target="_blank" href="http://yoursite.com" rel="noopener noreferrer">1-riverfish</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>Moon框架入门教程2</a></p><p class="post-meta"><span class="date meta-item">发布于&nbsp;2017-08-30</span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/tech/" title="tech" class="a-tag">tech</a><span>&nbsp;</span><a href="/tags/Moon/" title="Moon" class="a-tag">Moon</a><span>&nbsp;</span></span></p><p class="post-abstract"><h1 id="Moon框架入门教程2"><a href="#Moon框架入门教程2" class="headerlink" title="Moon框架入门教程2"></a>Moon框架入门教程2</h1><h2 id="Instance实例"><a href="#Instance实例" class="headerlink" title="Instance实例"></a>Instance实例</h2><p><strong><em>The root Moon instance is the core of your application, this is where any top level data should be defined, and it should be mounted on the root element that contains all of your components, directives, and templates.</em></strong></p>
<p><del>抱歉不能准确翻译</del></p>
<hr>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new Moon(</span><br><span class="line">&#123;</span><br><span class="line">  //options</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>通过关键字<code>new</code>新建 Moon 实例，其中包含实例的所有选项.<strong>实例可以不包含任何选项，但如果选项中包含<code>el</code>,那么实例将被绑定到这个元素上.如果没有提供<code>el</code>选项，app必须被手动绑定，例如</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.mount('#app');</span><br></pre></td></tr></table></figure>
<p>如果你提供一个<code>template</code>选项,Moon 将替代元素的<code>outerHTML</code>进行编译，例如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new Moon(&#123;</span><br><span class="line">  template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span>Content<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>一个MOON组件接受常规实例的所有选项，除了<code>el</code></strong></p>
<hr>
<h3 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h3><p>实例中的所有数据应该被提供在<code>data</code>选项中，这些数据可以通过模板来获得.这些数据的属性是<strong>reactive</strong>（活性的）,用<code>.set</code>更改数据会立即在DOM中更新</p>
<hr>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>当你想要重用代码中特定的行为时，可以调用方法来替代增加一个计数器<em>(小编理解为一个特定行为，比如在app6的例子中count+1)</em></p>
<p>方法中的<code>this</code>是一个指向实例的引用<em>(我有感觉，js和C++有某种关系)</em>，所以你可以<code>this.set</code>.</p>
<p>这也意味着，你必须用<code>app.callMethod</code>当你不得不手动调用他的时候.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const app = new Moon(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    count: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment: function ()&#123;</span><br><span class="line">      this.set('count',this.get('count')+1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  app.callMethod('increment');</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>方法在模板中也可以使用，即使需要调用任何函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'app'</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;reverse(msg)&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;reverse("racecaR")&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const app = new Moon(&#123;</span><br><span class="line">  el: '#app',</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: '!nooM olleH'</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    reverse: function (str)&#123;</span><br><span class="line">      return str.split('').reverse().join('');</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Computed-Properties"><a href="#Computed-Properties" class="headerlink" title="Computed Properties"></a>Computed Properties</h3><p>如果你有一个依赖其他数值并返回动态结果的value,你应该用到 <code>a computed property</code>,<strong>computed property</strong>分析他们的依赖关系并只在需要时运行.例如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const app = new Moon(&#123;</span><br><span class="line">  el: '#app',</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: 'Hello Moon!',</span><br><span class="line">    count: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    reversedMsg: &#123;</span><br><span class="line">      get: function() &#123;</span><br><span class="line">        return this.get('msg').split('').reverse().join('');</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.set('msg','New Message');//将会引起 ‘reversedMsg’ 进行求值（有一个联动）</span><br><span class="line">app.set('count',1);// 'reversedMsg‘将会被贮藏</span><br><span class="line">//这个地方有些疑问，理解的不好</span><br></pre></td></tr></table></figure>
<p><em>This caching behavior efficiently prevents any complex computations to be run only when needed. If a property that the computed property depends on is updated, then the computed property is evaluated again and analyzed for new dependencies.</em></p>
<p><strong>大概理解了一下，意思是 当一个 computed property中的 property所依赖的property发生了改变，computed property 会再次进行求值，而不会累加成复杂的计算</strong></p>
<hr>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p>类似于 React 和 Vue ,Moon调用 <strong>lifecycle hooks</strong>贯穿你的实例和组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">new Moon(&#123;</span><br><span class="line">  hooks: &#123;</span><br><span class="line">    init: function()&#123;</span><br><span class="line">      // 当第一次创建时被调用</span><br><span class="line">    &#125;，</span><br><span class="line">    mounted: function()&#123;</span><br><span class="line">      // called when element is mounted and the first build has been run</span><br><span class="line">    &#125;,</span><br><span class="line">    updated: function()&#123;</span><br><span class="line">      // called every time data is updated</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed: function() &#123;</span><br><span class="line">      // called when it is destroyed, the component might be removed</span><br><span class="line">      // from the DOM</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>正如同你可以手动挂载实例，你也可以</p>
<p><code>app.destroy();</code></p>
<p>这会销毁实例</p>
<ul>
<li>阻止活性更新</li>
<li>拆卸事件监听器</li>
</ul>
<p>你也可以重新挂载，然后数据就会被重新存储并且具有活性</p>
<blockquote>
<p>晚上遇到了一点问题，无法进入Linux系统，王哥我社长说了一句挺在理，<strong>出了问题就重启，再不行就是权限的问题</strong>，<a href="http://wap.blog.163.com/w2/blogDetail.do?u=http://blog.163.com/thinki_cao/blog/static/8394487520130270379437/" target="_blank" rel="noopener">问题解决办法</a>.</p>
<p>Any question please contack <a href="https://www.github.com/1-riverfish" target="_blank" rel="noopener">1-riverfish</a></p>
</blockquote>
</p></div><div class="share"><span>分享到</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=http://yoursite.com/2017/08/30/Moon框架入门教程2/%20Ginger's blog%20Moon框架入门教程2" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/2017/09/02/Moon框架入门教程3/" title="Moon框架入门教程3"><i class="fa fa-angle-double-left"></i>&nbsp;上一篇: Moon框架入门教程3</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/2017/08/29/Moon框架入门教程1/" title="Moon框架入门教程1">下一篇: Moon框架入门教程1&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2018&nbsp;<a target="_blank" href="http://yoursite.com" rel="noopener noreferrer">1-riverfish</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>